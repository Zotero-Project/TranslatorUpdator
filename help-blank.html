<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>راهنما و آموزش افزونه</title>
  <style>
    :root {
      --bg: #f7f7f9;
      --card: #fff;
      --muted: #6b7280;
      --border: #e5e7eb;
      --accent: #4a6ea9;
      --accent-600: #3d5e95;
    }
    html, body { height: 100%; }
    body { margin: 0; font-family: system-ui, tahoma, sans-serif; background: var(--bg); color: #1f2937; }
    header { background: var(--accent); color: #fff; padding: 14px 18px; }
    header h1 { margin: 0; font-size: 18px; }
    main { padding: 16px; max-width: 1100px; margin: 0 auto; }

    /* Layout similar to Zotero preferences: content + right sidebar */
    .layout { display: grid; grid-template-columns: 1fr 260px; gap: 12px; align-items: start; }
    .content { background: var(--card); border: 1px solid var(--border); border-radius: 10px; padding: 16px; min-height: 420px; }
    .sidebar { background: var(--card); border: 1px solid var(--border); border-radius: 10px; padding: 8px; }
    .sidebar h2 { font-size: 14px; margin: 6px 8px 10px; color: var(--muted); font-weight: 600; }
    .side-list { display: flex; flex-direction: column; gap: 6px; }
    .side-btn { appearance: none; border: 1px solid transparent; background: transparent; border-radius: 8px; padding: 10px 12px; text-align: start; cursor: pointer; font-size: 14px; color: #111827; }
    .side-btn:hover { background: #f3f4f6; }
    .side-btn[aria-selected="true"] { background: #eef2ff; border-color: #c7d2fe; color: #1e3a8a; }

    .section { display: none; }
    .section.active { display: block; }

    .muted { color: var(--muted); font-size: 13px; }
    h2 { margin: 0 0 10px; font-size: 18px; }
    p { margin: 8px 0; line-height: 1.75; }
    ul { margin: 8px 0; padding: 0 18px; }
    li { margin: 6px 0; }
    .kbd { display: inline-block; border: 1px solid #d1d5db; border-bottom-width: 2px; padding: 0 6px; border-radius: 6px; background: #f9fafb; font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace; font-size: 13px; }
  </style>
  <meta http-equiv="Content-Security-Policy" content="default-src 'self' 'unsafe-inline' data:; img-src 'self' data:; style-src 'self' 'unsafe-inline';" />
  <meta http-equiv="X-Content-Type-Options" content="nosniff" />
  <meta http-equiv="Referrer-Policy" content="no-referrer" />
  <meta http-equiv="X-Frame-Options" content="SAMEORIGIN" />
  <meta http-equiv="Permissions-Policy" content="clipboard-read=(); clipboard-write=()" />
</head>
<body>
  <header>
    <h1>راهنما و آموزش افزونه</h1>
  </header>
  <main>
    <div class="layout" id="layout">
            <section class="content" id="content" aria-live="polite">
        <!-- Locker -->
        <article class="section" id="view-locker" role="tabpanel" aria-labelledby="btn-locker" data-view="locker">
          <h2>رمزگذاری فایل‌ها (Attachment Locker)</h2>
          <p>
            این قابلیت برای جلوگیری از مشاهده و دستکاری ناخواستهٔ پیوست‌ها در داخل زوترو طراحی شده است. با رمزگذاری یک فایل:
          </p>
          <ul>
            <li>برای <strong>باز کردن در Reader</strong>، <strong>نمایش در پوشه</strong> و <strong>تغییر نام فایل</strong>، ابتدا باید رمز صحیح وارد شود.</li>
            <li>بخش <strong>Attachment Info</strong> و آیکن آن در سایدبار هنگام قفل بودن پنهان می‌شوند.</li>
          </ul>
          <h3>چطور رمز بگذارم؟</h3>
          <ul>
            <li>روی یک پیوست (مثلاً PDF) راست‌کلیک کنید → «رمزگذاری».</li>
            <li>رمز را وارد و سپس تکرار کنید. قانون رمز: هر ترکیبی از حروف/عدد/سمبل با طول <strong>۶ تا ۲۲</strong> کاراکتر مجاز است.</li>
            <li>برای برداشتن رمز: روی همان فایل راست‌کلیک → «برداشتن رمز فایل» → رمز را وارد کنید.</li>
          </ul>
          <h3>نکات مهم</h3>
          <ul>
            <li>این قفل فقط دسترسی <strong>داخل زوترو</strong> را محدود می‌کند؛ فایل روی دیسک به‌صورت فیزیکی رمزنگاری نمی‌شود.</li>
            <li>اگر گزینهٔ «رمزگذاری» را نمی‌بینید، مطمئن شوید دقیقاً یک پیوست انتخاب شده است و پس از نصب افزونه یکبار زوترو را ری‌استارت کنید.</li>
          </ul>
          <!-- New features appended below the existing tutorial -->
          <hr/>
          <h2>رمزگذاری فایل‌ها (Attachment Locker)</h2>
          <p>
            این قابلیت برای جلوگیری از مشاهده و دستکاری ناخواستهٔ پیوست‌ها در داخل زوترو طراحی شده است. با رمزگذاری یک فایل:
          </p>
          <ul>
            <li>برای <strong>باز کردن در Reader</strong>، <strong>نمایش در پوشه</strong> و <strong>تغییر نام فایل</strong>، ابتدا باید رمز صحیح وارد شود.</li>
            <li>بخش <strong>Attachment Info</strong> و آیکن آن در سایدبار هنگام قفل بودن پنهان می‌شوند.</li>
          </ul>
          <h3>چطور رمز بگذارم؟</h3>
          <ul>
            <li>روی یک پیوست (مثلاً PDF) راست‌کلیک کنید → «رمزگذاری».</li>
            <li>رمز را وارد و سپس تکرار کنید. قانون رمز: هر ترکیبی از حروف/عدد/سمبل با طول <strong>۶ تا ۲۲</strong> کاراکتر مجاز است.</li>
            <li>برای برداشتن رمز: روی همان فایل راست‌کلیک → «برداشتن رمز فایل» → رمز را وارد کنید.</li>
          </ul>
          <p class="muted">نکته: این قفل فقط دسترسی <strong>داخل زوترو</strong> را محدود می‌کند؛ فایل روی دیسک رمزنگاری نمی‌شود.</p>

          <h2>اسکرول‌بار رنگی</h2>
          <p>
            برای خوانایی بهتر، رنگ و ضخامت اسکرول‌بارها در لیست‌ها و Reader کمی بهبود داده شده‌اند تا در تم روشن و نمایشگرهای مختلف واضح‌تر باشند.
          </p>
          <h3>تنظیم شدت</h3>
          <p class="muted">
            شدت پیش‌فرض ۱۰۰ است. در صورت تمایل می‌توانید مقدار <span class="kbd">extensions.base-plug.intensity</span> را در Config Editor تغییر دهید:
          </p>
          <ul>
            <li>Preferences → Advanced → <em>Config Editor…</em>، کلید بالا را جست‌وجو کنید و مقدار ۰ تا ۱۰۰ بگذارید.</li>
          </ul>

          <h2>بهبودهای تم روشن (Light Theme)</h2>
          <p>
            برای جدایش بصری بهتر، خطوط جداکننده و پس‌زمینهٔ ردیف‌ها کمی پررنگ‌تر/زِبرا شده‌اند و مرزبندی بین پنل‌ها واضح‌تر است. این تغییرات فقط در تم روشن اعمال می‌شوند و تعادل طراحی اصلی را حفظ می‌کنند.
          </p>
          <ul>
            <li>خوانایی و تمرکز روی ردیف‌ها و متادیتا بهتر می‌شود، مخصوصاً روی نمایشگرهای با کنتراست پایین.</li>
            <li>مرزبندی بین پنل‌ها در کار طولانی‌مدت سبب کاهش خستگی چشم می‌شود.</li>
          </ul>
        </article>

        <!-- Scrollbar Colorizer -->
        <article class="section" id="view-scrollbar" role="tabpanel" aria-labelledby="btn-scrollbar" data-view="scrollbar">
          <h2>اسکرول‌بار رنگی</h2>
          <p>
            برای خوانایی بهتر، رنگ و ضخامت اسکرول‌بارها در لیست‌ها و Reader کمی بهبود داده شده‌اند تا در تم روشن و نمایشگرهای مختلف واضح‌تر باشند.
          </p>
          <h3>تنظیم شدت</h3>
          <p class="muted">
            شدت پیش‌فرض ۱۰۰ است. در صورت تمایل می‌توانید مقدار <span class="kbd">extensions.base-plug.intensity</span> را در Config Editor تغییر دهید:
          </p>
          <ul>
            <li>Preferences → Advanced → <em>Config Editor…</em>، کلید بالا را جست‌وجو کنید و مقدار ۰ تا ۱۰۰ بگذارید.</li>
          </ul>
        </article>

        <!-- Light Theme Tweaks -->
        <article class="section" id="view-theme" role="tabpanel" aria-labelledby="btn-theme" data-view="theme">
          <h2>بهبودهای تم روشن (Light Theme)</h2>
          <p>
            برای جدایش بصری بهتر، خطوط جداکننده و پس‌زمینهٔ ردیف‌ها کمی پررنگ‌تر/زِبرا شده‌اند و مرزبندی بین پنجره‌ها (Pane Dividers) واضح‌تر است. این تغییرات فقط در تم روشن اعمال می‌شوند و تعادل طراحی اصلی را حفظ می‌کنند.
          </p>
          <h3>چرا این تغییرات؟</h3>
          <ul>
            <li>خوانایی و تمرکز روی ردیف‌ها و متادیتا بهتر می‌شود، مخصوصاً روی نمایشگرهای با کنتراست پایین.</li>
            <li>مرزبندی بین پنل‌ها در کار طولانی‌مدت سبب کاهش خستگی چشم می‌شود.</li>
          </ul>
          <p class="muted">برای غیرفعال‌سازی کامل این بهبودها می‌توانید افزونه را موقتاً غیرفعال کنید.</p>
        </article>
      </section>

            <aside class="sidebar" id="sidebar" role="tablist" aria-label="فهرست بخش‌ها">
        <h2 class="muted">بخش‌ها</h2>
        <div class="side-list">
          <button class="side-btn" id="btn-locker" role="tab" aria-selected="false" data-target="locker">رمزگذاری فایل‌ها</button>
          <button class="side-btn" id="btn-scrollbar" role="tab" aria-selected="false" data-target="scrollbar">اسکرول‌بار رنگی</button>
          <button class="side-btn" id="btn-theme" role="tab" aria-selected="false" data-target="theme">بهبودهای تم روشن</button>
        </div>
      </aside>
    </div>
  </main>

  <script>
    (function(){
      function select(view){
        document.querySelectorAll('.section').forEach(sec => {
          const active = sec.getAttribute('data-view') === view;
          sec.classList.toggle('active', active);
          if (active) sec.removeAttribute('hidden'); else sec.setAttribute('hidden','');
        });
        document.querySelectorAll('.side-btn').forEach(btn => {
          const active = btn.getAttribute('data-target') === view;
          btn.setAttribute('aria-selected', active ? 'true' : 'false');
        });
      }

      function applyFromHash(){
        const hash = (location.hash || '#locker').replace('#','');
        const allow = ['locker','scrollbar','theme']; const view = allow.includes(hash) ? hash : 'locker';
        select(view);
      }

      document.addEventListener('click', (e) => {
        const btn = e.target.closest('.side-btn');
        if (!btn) return;
        const target = btn.getAttribute('data-target');
        if (!target) return;
        location.hash = target;
      });

      window.addEventListener('hashchange', applyFromHash);
      window.addEventListener('DOMContentLoaded', applyFromHash);
    })();
  </script>
</body>
</html>



